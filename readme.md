# 2025 æ–°æ˜¥ç‰ˆï¼šä¸€ä¸ªè¿‘ä¹å®Œç¾çš„ Konva æ‰‹å†™æ¿è¯ç”Ÿè®°

åŸºäº Konva å¼€å‘çš„å¯ç›´æ¥ç”¨äºå„ç±»é¡¹ç›®çš„ Web æ‰‹å†™æ¿ç»„ä»¶ã€‚

åŒ…å« 4 å¥—ä»£ç ï¼š

1. React18/19 (javascript)
2. React18/19 (typescript)
3. Vue3 (javascript)
4. Vue3 (typescript)

## ç›®å½•ç»“æ„è¯´æ˜

dist ç›®å½•ä¸º build åçš„ä»£ç ï¼Œå¯è‡ªè¡Œä¸‹è½½ä½“éªŒæœ€ç»ˆæ•ˆæœã€‚

zip å‹ç¼©åŒ…ä¸ºé¡¹ç›®æºç ã€‚

ğŸ”‘ğŸ”‘ğŸ’–ğŸ’– è§£å‹å¯†ç ï¼Œè§é…å¥—æ•™ç¨‹åŸæ–‡ã€‚ ğŸ’–ğŸ’–ğŸ”‘ğŸ”‘

## æ•™ç¨‹åŸæ–‡

ğŸ“šğŸ“š æœ¬é¡¹ç›®æœ‰è¯¦ç»†çš„è®²è§£æ•™ç¨‹ï¼ŒåŸæ–‡è¯·å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ã€å§æ¢…åˆé—»èŠ±ã€‘ğŸ“šğŸ“š

[ã€Š2025 æ–°æ˜¥ç‰ˆï¼šä¸€ä¸ªè¿‘ä¹å®Œç¾çš„ Konva æ‰‹å†™æ¿è¯ç”Ÿè®°ã€‹](https://mp.weixin.qq.com/s/1n_AGmKpSwYsMkTpgW6Bsg) 

## æ•™ç¨‹ç›®å½•

```
1 å¼€å‘åŠæµ‹è¯•ç¯å¢ƒ
2 æ ¸å¿ƒç‚¹åŠè§£å†³æ–¹æ¡ˆ
â€¢ 2.1 è¯†åˆ«é¼ æ ‡ã€æ‰‹æŒ‡ã€è§¦æ§ç¬”
â€¢ 2.2 é«˜å¼ºåº¦å•ç‚¹ç¬”åˆ’æ“ä½œæ—¶å¯èƒ½è¯¯è¯†åˆ«ä¸ºå¤šç‚¹è§¦æ§
â€¢ 2.3 åŒæŒ‡ç¼©æ”¾å’Œç§»åŠ¨
â€¢ 2.4 è‡ªé€‚åº”å¤–å±‚å®¹å™¨å°ºå¯¸
â€¢ 2.5 åŒæŒ‡æ¥è§¦å’ŒæŠ¬èµ·çš„ç¬é—´å¯¼è‡´è¯¯è§¦ç¬”åˆ’
â€¢ 2.6 ç¬”åˆ’è¿‡å¤šå¯¼è‡´çš„å¡é¡¿
â€¢ 2.7 å…¶ä»–æ€§èƒ½ä¼˜åŒ–Tips
â€¢ 2.8 iPadä¸HUAWEI MatePadä½“éªŒå·®å¼‚
â€¢ 2.9 Debugä¿¡æ¯è¾“å‡º
3 é¡¹ç›®æºç 
æ¨èé˜…è¯»
ZIPé¡¹ç›®æºç è§£å‹å¯†ç 
```

## API è¯´æ˜

> drawStageç»„ä»¶ï¼ˆç”»å¸ƒStageï¼‰çš„å®½é«˜æ— éœ€è®¾ç½®ï¼Œæ ¹æ®â€œå¼•å…¥ç»„ä»¶çš„å¤–éƒ¨å®¹å™¨å°ºå¯¸â€åŠâ€œåŠ è½½çš„åº•æ¿å›¾ç‰‡å°ºå¯¸â€è‡ªåŠ¨é€‚é…ï¼Œç±»ä¼¼è‡ªåŠ¨å®ç°CSSçš„background-size: containçš„å¡«å……æ•ˆæœã€‚å› æ­¤ï¼Œåªéœ€è‡ªè¡Œåšå¥½å¤–å±‚å®¹å™¨çš„é€‚é…å³å¯ã€‚

| å±æ€§                 | è¯´æ˜                                                                                                 | ç±»å‹                           | é»˜è®¤å€¼                                  |
| :----------------- | :---------------------------------------------------------------------------------------------------- | :--------------------------- | :-------------------------------------- |
| imageSrc           | ã€å¿…å¡«ã€‘åº•æ¿å›¾ç‰‡ã€‚æ”¯æŒURLæˆ–base64ï¼ŒURLä¸èƒ½è·¨åŸŸ        | string                       |                                         |
| tool               | ã€å¿…å¡«ã€‘å·¥å…·ã€‚pen=ç¬”ã€eraser=æ©¡çš®         | string           |            |
| allowedPointerType | å…è®¸çš„è§¦æ§æ–¹å¼ã€‚mouse=é¼ æ ‡ï¼Œtouch=æ‰‹æŒ‡ï¼Œpen=è§¦æ§ç¬”      | object       | { mouse: true, touch: true, pen: true } |
| initialData        | åˆå§‹ç¬”åˆ’æ•°æ®        | string                       | null                                    |
| borderWidth        | ç”»å¸ƒè¾¹æ¡†å®½åº¦        | number                       | 1                                       |
| borderColor        | ç”»å¸ƒè¾¹æ¡†é¢œè‰²        | string                       | #000000                                 |
| maxScale           | æœ€å¤§ç¼©æ”¾æ¯”ä¾‹        | number                       | 3                                       |
| stageOriginalWidth | StageåŸå§‹å®½åº¦ï¼ˆå‚è€ƒç³»ï¼‰ã€‚ç”¨äºå½“Stageå™¨å°ºå¯¸å¤§å°å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç¬”åˆ’çš„ç²—ç»†ä»¥stageOriginalWidthä¸ºå‚è€ƒè¿›è¡Œæ¯”ä¾‹ç¼©æ”¾ã€‚ä¾‹å¦‚ï¼Œè®¾ç½®stageOriginalWidth=900ï¼ŒstrokeWidth=9æ—¶ï¼Œå½“ç”»å¸ƒå°ºå¯¸å®½åº¦è‡ªåŠ¨è°ƒæ•´ä¸º1000æ—¶ï¼Œç¬”åˆ’ç²—ç»†ä¹Ÿä¼šç›¸åº”è‡ªåŠ¨è°ƒæ•´ä¸º10ï¼Œç¡®ä¿ç¬”åˆ’ç²—ç»†ä¸ç”»å¸ƒå°ºå¯¸ç›¸å¯¹ä¸å˜ã€‚é»˜è®¤ä¸ºautoï¼Œå®é™…ä½œç”¨æ˜¯å°†å½“å‰ç”»å¸ƒçš„å®½åº¦ä½œä¸ºstageOriginalWidthï¼Œautoé€‚ç”¨äºé¦–æ¬¡åŠ è½½ç”»å¸ƒçš„å°ºå¯¸æ˜¯å›ºå®šå€¼ï¼ˆä»¥ç§»åŠ¨ç«¯ä¸ºä¾‹ï¼Œæ— è®ºæ¨ªå±è¿˜æ˜¯ç«–å±ï¼Œåˆæ¬¡åŠ è½½æ—¶ï¼Œéƒ½éœ€è¦å°†ç”»å¸ƒå°ºå¯¸è®¾ç½®ä¸ºå›ºå®šå€¼ï¼‰ã€‚æ€»ä¹‹ï¼Œä¸ºäº†ä¿è¯åœ¨ç”»å¸ƒå°ºå¯¸è‡ªé€‚åº”å˜åŒ–æ—¶ï¼Œç¬”åˆ’ç²—ç»†å’Œç”»å¸ƒå°ºå¯¸çš„æ¯”ä¾‹ç›¸å¯¹ä¸å˜ï¼Œéœ€è¦å€ŸåŠ©stageOriginalWidthç»™strokeWidthä¸€ä¸ªå‚è€ƒç³»ã€‚ | number \|\| string           | auto                                    |
| strokeColor        | ç¬”åˆ’é¢œè‰²           | string                       | #000000                                 |
| strokeWidth        | ç¬”åˆ’ç²—ç»†           | number                       | 5                                       |
| strokeTension      | ç¬”åˆ’å¹³æ»‘åº¦ï¼ˆ0-1ï¼‰ï¼Œå¯¹æ‰€æœ‰ç¬”åˆ’ç”Ÿæ•ˆ            | number                        | 0.5                                     |
| strokeCap          | ç¬”åˆ’çº¿æ®µä¸¤ç«¯çš„æ ·å¼ã€‚round=åœ†å½¢ï¼Œsquare=æ–¹å½¢ã€butt=æ— ï¼Œå¯¹æ‰€æœ‰ç¬”åˆ’ç”Ÿæ•ˆ           | string                       | round                   |
| strokeJoin         | ç¬”åˆ’å¤šæ¡çº¿æ®µçš„é“¾æ¥æ ·å¼ã€‚round=åœ†å½¢ï¼Œmiter=å°–è§’ã€bevel=æ–œåˆ‡ï¼Œå¯¹æ‰€æœ‰ç¬”åˆ’ç”Ÿæ•ˆ      | string                       | round                    |
| maxRealRenderLines | æœ€å¤§å®æ—¶æ¸²æŸ“çš„ç¬”åˆ’æ•°é‡ï¼ˆå»ºè®®20ï¼Œå°½é‡ä¸è¶…è¿‡100ï¼Œè¶Šå¤§è¶Šå¡é¡¿ï¼‰                     | number                       | 20                      |
| maxUndoLines       | æœ€å¤§å¯æ’¤é”€çš„ç¬”åˆ’æ•°é‡ï¼ˆå»ºè®®10ï¼Œå¿…é¡»å°äºmaxRealRenderLinesï¼‰                   | number                       | 10                       |
| enableDebug        | æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯                                                             | boolean                      | false                  |
| eraserHintColor    | æ©¡çš®æ“¦æç¤ºè‰²                                                             | string                       | #b5f5ec                  |
| eraserHintWidth    | æ©¡çš®æ“¦ç²—ç»†                                                              | number                       | 20                     |
| eraserTension      | æ©¡çš®æ“¦å¹³æ»‘åº¦ï¼ˆ0-1ï¼‰ï¼Œå¯¹æ‰€æœ‰æ©¡çš®æ“¦ç¬”åˆ’ç”Ÿæ•ˆ                                     | number                       | 0.5                      |
| eraserCap          | æ©¡çš®æ“¦çº¿æ®µä¸¤ç«¯çš„æ ·å¼ã€‚round=åœ†å½¢ï¼Œsquare=æ–¹å½¢ã€butt=æ— ï¼Œå¯¹æ‰€æœ‰æ©¡çš®æ“¦ç¬”åˆ’ç”Ÿæ•ˆ     | string                       | round                    |
| eraserJoin         | æ©¡çš®æ“¦å¤šæ¡çº¿æ®µçš„é“¾æ¥æ ·å¼ã€‚round=åœ†å½¢ï¼Œmiter=å°–è§’ã€bevel=æ–œåˆ‡ï¼Œå¯¹æ‰€æœ‰æ©¡çš®æ“¦ç¬”åˆ’ç”Ÿæ•ˆ   | string                       | round                    |
| onImageLoadFailed  | äº‹ä»¶å›è°ƒï¼šåº•æ¿å›¾ç‰‡åŠ è½½å¤±è´¥                                                | function                     |         null           |
| onImageLoadSucceed | äº‹ä»¶å›è°ƒï¼šåº•æ¿å›¾ç‰‡åŠ è½½æˆåŠŸ                                               | function                     |           null           |
| onLinesChanged     | äº‹ä»¶å›è°ƒï¼šç¬”åˆ’å‘ç”Ÿæ”¹å˜                                                  | function                     |          null             |
| onUndoFinished     | äº‹ä»¶å›è°ƒï¼šæ’¤é”€å®Œæˆï¼Œè¿”å›å‰©ä½™å¯æ’¤é”€çš„æ¬¡æ•°                                   | function(number: resetCount) |       null               |

